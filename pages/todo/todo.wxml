<!-- é¡¶éƒ¨å¯¼èˆªæ  -->
<view class="header">
  <text class="title">æˆ‘çš„å¾…åŠžï¼ˆ{{todos.length}}ï¼‰</text>
  <image 
    src="../../images/clear.png" 
    class="clear-btn" 
    bindtap="showClearConfirm"
    wx:if="{{todos.length > 0}}"
  />
</view>

<view class="custom-notice" bindtap="navigateToNotice">
  <view class="notice-content">
    <text class="notice-icon" >ðŸ“¢</text>
    <text class="notice-text">{{latestNoticeTitle}}</text>
    <view class="notice-action" catchtap="showLatestNotice">
      <text class="action-text">è¯¦æƒ…</text>
      <image src="/images/arrow-right.png" class="action-icon" />
    </view>
  </view>
</view>

<view class="container">
  <view class="todo-list">
    <t-swipe-cell 
      class="todo-item {{item._animate || ''}}"
      wx:for="{{todos}}"
      wx:key="index"
      data-index="{{index}}"
    >
      <!-- ä¿®æ”¹åŽçš„cellç»“æž„ -->
      <t-cell
        class="{{item.completed ? 'completed' : ''}}"
        title="{{item.text}}"
        description="{{item.remarks}}"
        note="{{item.setDate}}"
        bordered="{{false}}"
        custom-style="width:100%"
        bindtap="navigateToDetail"
        data-index="{{index}}"
      >
        <view 
          wx:if="{{item.completed}}"
          class="completed-decorate"
        ></view>
        <view 
          slot="right-icon"
          style="position:relative;z-index:1000;background:inherit;padding-left:20rpx"
        >
          <checkbox 
            slot="right-icon"
            checked="{{item.completed}}" 
            catchtap="toggleTodo" 
            data-index="{{index}}"
          />
        </view>
      </t-cell>
      <!-- ä¿®æ”¹æ»‘åŠ¨æ“ä½œæŒ‰é’®ç»‘å®š -->
      <view slot="right" class="btn-wrapper">
        <view 
          class="btn edit-btn column" 
          data-index="{{index}}" 
          bind:tap="handleSwipeAction" 
          data-type="edit"
        >
          <t-icon class="padding-bottom" name="edit" size="32rpx"></t-icon>
          ç¼–è¾‘
        </view>
        <view 
          class="btn delete-btn column" 
          data-index="{{index}}" 
          bind:tap="handleSwipeAction" 
          data-type="delete"
        >
          <t-icon class="padding-bottom" name="delete" size="32rpx"></t-icon>
          åˆ é™¤
        </view>
      </view>
    </t-swipe-cell>

  </view>
</view>

<t-fab icon="add" bind:click="navigateToAdd" draggable />